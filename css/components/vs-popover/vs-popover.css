.vs-popover {
  position: relative;
  display: inline-flex;
  align-items: flex-start;
}

.vs-popover__trigger {
  white-space: nowrap;
}

.vs-popover__panel {
  position: absolute;
  inset-inline-start: 0;
  inset-block-start: calc(100% + var(--space-8));
  min-inline-size: calc(var(--space-32) * 6);
  max-inline-size: min(90vw, calc(var(--space-32) * 8));
  background: var(--surface-default);
  color: var(--text-primary);
  border-radius: var(--radius-md);
  box-shadow: var(--elevation-3);
  border: 1px solid var(--border-color-subtle);
  padding: var(--space-16);
  z-index: 10;
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
  transform: translateY(var(--space-4));
  transition: opacity 150ms ease, transform 150ms ease, visibility 150ms ease;
}

.vs-popover__header {
  display: flex;
  align-items: center;
  gap: var(--space-8);
  margin-block-end: var(--space-12);
}

.vs-popover__title {
  font-size: var(--body-md-size);
  font-weight: var(--body-md-weight);
  line-height: var(--body-md-line-height);
  color: inherit;
  margin: 0;
}

.vs-popover__body {
  font-size: var(--body-md-size);
  line-height: var(--body-md-line-height);
  color: inherit;
}

.vs-popover__close {
  margin-inline-start: auto;
}

.vs-popover__arrow {
  position: absolute;
  inline-size: var(--space-16);
  block-size: var(--space-16);
  background: inherit;
  transform: rotate(45deg);
  border-inline-start: 1px solid var(--border-color-subtle);
  border-block-start: 1px solid var(--border-color-subtle);
  inset-inline-start: calc(var(--space-16) * 2);
  inset-block-start: calc(var(--space-16) * -1);
  box-shadow: var(--elevation-1);
}

.vs-popover.is-open .vs-popover__panel {
  opacity: 1;
  visibility: visible;
  pointer-events: auto;
  transform: translateY(0);
}

@media (max-width: 600px) {
  .vs-popover__panel {
    inline-size: min(90vw, calc(var(--space-32) * 7));
  }
}

/* ========================================================================  VARIANTS & SIZE MODIFIERS ================================================== */
/* Placement Variants */
.vs-popover--top .vs-popover__panel {
  inset-block-start: auto;
  inset-block-end: calc(100% + var(--space-8));
  transform: translateY(calc(var(--space-4) * -1));
}

.vs-popover--top.is-open .vs-popover__panel {
  transform: translateY(0);
}

.vs-popover--bottom .vs-popover__panel {
  inset-block-start: calc(100% + var(--space-8));
}

.vs-popover--start .vs-popover__panel {
  inset-inline-start: 0;
}

.vs-popover--end .vs-popover__panel {
  inset-inline-start: auto;
  inset-inline-end: 0;
}

.vs-popover--auto .vs-popover__panel {
  inline-size: max-content;
}

/* Arrow Variants */
.vs-popover--with-arrow .vs-popover__panel {
  padding-block-start: calc(var(--space-16) + var(--space-8));
}

.vs-popover--with-arrow.vs-popover--top .vs-popover__arrow {
  inset-block-start: auto;
  inset-block-end: calc(var(--space-16) * -1);
  transform: rotate(225deg);
}

.vs-popover--with-arrow.vs-popover--end .vs-popover__arrow {
  inset-inline-start: auto;
  inset-inline-end: calc(var(--space-16) * 2);
}

.vs-popover--with-arrow.vs-popover--start .vs-popover__arrow {
  inset-inline-start: calc(var(--space-16) * 2);
}

.vs-popover--no-arrow .vs-popover__arrow {
  display: none;
}

/* Content Variants */
.vs-popover--with-title .vs-popover__header {
  display: flex;
}

.vs-popover--no-title .vs-popover__header {
  display: none;
}

.vs-popover--text .vs-popover__body {
  white-space: normal;
}

.vs-popover--html .vs-popover__body {
  display: block;
}

/* Style Variants */
.vs-popover--default .vs-popover__panel {
  background: var(--surface-default);
  color: var(--text-primary);
}

.vs-popover--light .vs-popover__panel {
  background: var(--neutral-50);
  color: var(--text-secondary);
  border-color: var(--border-color-default);
}

.vs-popover--dark .vs-popover__panel {
  background: var(--neutral-900);
  color: var(--text-inverse);
  border-color: var(--neutral-800);
  box-shadow: var(--elevation-4);
}

.vs-popover--dark .vs-popover__arrow {
  border-inline-start-color: var(--neutral-800);
  border-block-start-color: var(--neutral-800);
}

.vs-popover--bordered .vs-popover__panel {
  border-color: var(--border-color-strong);
}

/* Behavior Variants */
.vs-popover--dismiss-on-blur .vs-popover__panel,
.vs-popover--dismiss-on-action .vs-popover__panel {
  transition: opacity 120ms ease, transform 120ms ease, visibility 120ms ease;
}

.vs-popover--persistent .vs-popover__panel {
  pointer-events: auto;
}

/* Trigger Variants */
.vs-popover--hover .vs-popover__trigger,
.vs-popover--focus .vs-popover__trigger,
.vs-popover--click .vs-popover__trigger,
.vs-popover--manual .vs-popover__trigger {
  cursor: pointer;
}

/* Size Variants */
.vs-popover--sm .vs-popover__panel {
  min-inline-size: calc(var(--space-32) * 5);
  padding: var(--space-12);
  gap: var(--space-8);
}

.vs-popover--md .vs-popover__panel {
  min-inline-size: calc(var(--space-32) * 6);
}

.vs-popover--lg .vs-popover__panel {
  min-inline-size: calc(var(--space-32) * 7);
  padding: var(--space-20);
  gap: var(--space-12);
}
