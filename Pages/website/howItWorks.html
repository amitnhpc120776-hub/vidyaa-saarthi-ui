<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Vidyaa sarthi – How It Works</title>

    <!-- ================= BOOTSTRAP CORE CSS ================= -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <!-- ================= VS DESIGN SYSTEM ================= -->
    <!-- Provides brand colors, borders, and neutral tokens -->
    <link rel="stylesheet" href="../../../../css/VS-Design-System.css" />
    <link rel="stylesheet" href="../../../../css/custom-component.css" />

    <!-- ================= MATH RENDERING (How It Works demo) ================= -->
    <script>
      window.MathJax = {
        tex: {
          inlineMath: [
            ["$", "$"],
            ["\\(", "\\)"],
          ],
          displayMath: [
            ["$$", "$$"],
            ["\\[", "\\]"],
          ],
          packages: { "[+]": ["mhchem"] },
        },
        loader: { load: ["[tex]/mhchem"] },
      };
    </script>
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"
    ></script>

    <!-- ================= PAGE-SPECIFIC LAYOUT STYLES ================= -->
    <!-- Structural helpers only (no behavior, no JS dependency) -->
    <style>
      :root {
        --vs-howitworks-clarify-height: 520px;
      }

      .vs-panel {
        border: 1px solid var(--border-neutral);
        border-radius: 0.75rem;
        background: var(--neutral-0);
        height: 100%;
      }

      .vs-panel-header {
        padding: 0.75rem 1rem;
        font-weight: 600;
        border-bottom: 1px solid var(--border-neutral-subtle);
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .vs-panel-body {
        padding: 1rem;
      }

      /* Keep the "Clarify Your Concepts" row height fixed (desktop) */
      @media (min-width: 768px) {
        section.d-none.d-md-block.mb-4 .row.g-4 > [class*="col-"] {
          height: var(--vs-howitworks-clarify-height);
        }

        section.d-none.d-md-block.mb-4 .row.g-4 .vs-panel {
          display: flex;
          flex-direction: column;
          overflow: hidden;
        }

        section.d-none.d-md-block.mb-4 .row.g-4 .vs-panel-body {
          flex: 1 1 auto;
          min-height: 0;
          overflow-y: auto;
        }
      }

      .derivative-btn {
        min-height: 96px;
        font-weight: 600;
      }
      /* ================= CHAT INPUT (ChatGPT-style) ================= */

      .chat-input-wrapper {
        border-top: 1px solid var(--border-neutral);
        padding: 0.75rem;
      }

      .chat-input-inner {
        background: var(--neutral-0);
        border: 1px solid var(--border-neutral);
        border-radius: 999px; /* pill shape */
        padding: 0.25rem 0.5rem;
      }

      .chat-text-input {
        border: none;
        box-shadow: none;
        flex-grow: 1;
      }

      .chat-text-input:focus {
        outline: none;
        box-shadow: none;
      }

      .chat-icon-btn {
        border-radius: 50%;
        width: 36px;
        height: 36px;
        padding: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 600;
      }
      /* ================= CHAT LAYOUT ================= */

      .chat-row {
        display: flex;
        align-items: flex-start;
        gap: 0.5rem;
        margin-bottom: 0.75rem;
      }

      /* Student (Left) */
      .chat-row--student {
        justify-content: flex-start;
      }

      /* AI (Right) */
      .chat-row--ai {
        justify-content: flex-end;
      }

      /* Helper Texts*/
      .vs-helper-tip {
        font-size: 0.25rem;
        line-height: 1.2;
        font-weight: 200;
      }
      /* ================= AVATARS ================= */

      .chat-avatar {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        font-size: 0.75rem;
        font-weight: 600;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
      }

      .chat-row--student .chat-avatar {
        background: var(--neutral-300);
        color: var(--neutral-900);
      }

      .chat-row--ai .chat-avatar {
        background: var(--brand-600);
        color: #fff;
      }

      /* ================= CHAT BUBBLES ================= */

      .chat-bubble {
        max-width: 72%;
        padding: 0.6rem 0.75rem;
        border-radius: 0.75rem;
        line-height: 1.45;
        font-size: 0.9rem;
        word-wrap: break-word;
      }

      /* Student bubble */
      .chat-bubble--student {
        background: var(--neutral-200);
        border-top-left-radius: 0.25rem;
      }

      /* AI bubble */
      .chat-bubble--ai {
        background: var(--brand-100);
        border-top-right-radius: 0.25rem;
      }

      /* Paragraph spacing inside AI responses */
      .chat-bubble--ai p {
        margin-bottom: 0.5rem;
      }

      .chat-bubble--ai p:last-child {
        margin-bottom: 0;
      }
    </style>
  </head>

  <body>
    <!-- ================= NAVBAR (Injected via include-components.js) ================= -->
    <div id="vs-navbar"></div>

    <!-- ================= HERO ================= -->
    <section class="container py-5">
      <div class="row align-items-center g-4">
        <div class="col-lg-7">
          <p class="text-uppercase small fw-semibold text-muted mb-2">
            Personalization in the truest sense
          </p>
          <h1 class="display-5 fw-semibold mb-3">
            Vidyaa sarthi personalizes every textbook explanation to each
            learner’s needs.
          </h1>
          <p class="lead text-muted mb-3">
            Our unique algorithm first identifies the learner’s actual learning
            style and then adapts the same curriculum textbook content to match
            it. We don’t generate new content—we explain the existing textbook
            better, in a way that finally fits.
          </p>
          <p class="mb-4">
            Explore the demo below to see the same textbook topic explained in
            different ways for Student 1 and Student 2, based on their learning
            needs.
          </p>
          <a class="btn btn-primary btn-lg" href="#vs-howitworks-demo">
            <span>View the Demo</span>
            <span>→</span>
          </a>
        </div>
        <div class="col-lg-5">
          <div class="vs-panel h-100">
            <div class="vs-panel-header">How personalization works</div>
            <div class="vs-panel-body">
              <img
                src="../../../assets/illustration/HowItWorks/heroSectionOurProcess.svg"
                alt="Students learning happily"
                class="w-100 h-100"
                style="object-fit: cover"
              />
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="container-fluid py-4" id="vs-howitworks-demo">
      <!-- ================================================= -->
      <!-- ROW 1 : CLASS / SUBJECT / BOOK / CHAPTER SELECTION -->
      <!-- ================================================= -->
      <!-- Static dropdown structure only; options injected later via JS -->
      <section class="mb-4">
        <h5 class="fw-semibold mb-3">
          Select Your Class & Chapter You Want to Study
        </h5>

        <!-- Responsive grid: stacks on mobile, 4 columns on desktop -->
        <div class="row row-cols-1 row-cols-md-2 row-cols-lg-4 g-3">
          <div class="col">
            <select class="form-select" data-vs-dropdown="class">
              <option>Select Class</option>
            </select>
            <div class="small text-muted mt-1">
              Demo: Select Class VIII, X, or XII.
            </div>
          </div>
          <div class="col">
            <select class="form-select" data-vs-dropdown="subject">
              <option>Select Subject</option>
            </select>
          </div>
          <div class="col">
            <select class="form-select" data-vs-dropdown="book">
              <option>Select Book</option>
            </select>
          </div>
          <div class="col">
            <select class="form-select" data-vs-dropdown="chapter">
              <option>Select Chapter</option>
            </select>
          </div>
        </div>
      </section>

      <!-- ================================================= -->
      <!-- DESKTOP VIEW (> md)                               -->
      <!-- Three-column learning workspace                   -->
      <!-- ================================================= -->
      <section class="d-none d-md-block mb-4">
        <h5 class="fw-semibold mb-3">Clarify Your Concepts</h5>

        <div class="row g-4">
          <!-- ================= TOPIC LIST (DESKTOP) ================= -->
          <!-- Topics will be rendered dynamically later -->
          <div class="col-md-3">
            <div class="vs-panel">
              <div class="vs-panel-header">Topic List</div>
              <div class="vs-panel-body">
                <p class="small text-muted mb-2">
                  Select a topic from the list to continue.
                </p>
                <!-- Sample static topic item for visual reference -->
                <div class="form-check mb-2">
                  <input class="form-check-input" type="checkbox" />
                  <label class="form-check-label"> Sample Topic Name </label>
                </div>
              </div>
            </div>
          </div>

          <!-- ================= TOPIC DESCRIPTION (DESKTOP) ================= -->
          <!-- Displays description of the selected topic -->
          <div class="col-md-5">
            <div class="vs-panel">
              <div class="vs-panel-header">Topic Description</div>
              <div class="vs-panel-body">
                <p class="small text-muted">
                  Topic description will appear here
                </p>
              </div>
            </div>
          </div>

          <!-- ================= CHAT SIMULATION (DESKTOP) ================= -->
          <!-- UI placeholder only; no chat logic wired -->
          <div class="col-md-4">
            <div class="vs-panel d-flex flex-column h-100">
              <div class="vs-panel-header">
                <span>Ask Vidyaa sarthi</span>
                <!-- Student persona switch (UI only) -->
                <div class="d-flex flex-column align-items-end">
                  <div class="d-flex gap-2">
                    <button class="btn btn-outline-secondary btn-sm">
                      Student 1
                    </button>
                    <button class="btn btn-outline-secondary btn-sm">
                      Student 2
                    </button>
                  </div>
                  <div class="small text-muted mt-1 vs-helper-tip">
                    Click Student 1 or Student 2 for personalized explanations,
                    then highlight text for 'Explain This'
                  </div>
                </div>
              </div>
              <div class="vs-panel-body flex-grow-1">
                <p class="small text-muted">Chat simulation area</p>
              </div>
              <!-- ================= CHAT INPUT BAR ================= -->
              <div class="chat-input-wrapper mt-auto">
                <div class="chat-input-inner d-flex align-items-center gap-2">
                  <!-- Left icon (add / attach) -->
                  <button
                    type="button"
                    class="btn btn-light chat-icon-btn"
                    aria-label="Add"
                  >
                    +
                  </button>

                  <!-- Text input -->
                  <input
                    type="text"
                    class="form-control chat-text-input"
                    placeholder="Ask Vidyaa sarthi…"
                  />

                  <!-- Right icon (mic / send) -->
                  <button
                    type="button"
                    class="btn btn-dark chat-icon-btn"
                    aria-label="Send"
                  >
                    ↑
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- ================================================= -->
      <!-- DERIVATIVE LEARNING RESOURCES (DESKTOP)           -->
      <!-- Clickable tiles; behavior added later             -->
      <!-- ================================================= -->
      <section class="d-none d-md-block">
        <h5 class="fw-semibold mb-3">Derivative Learning Resources</h5>

        <div class="row g-3">
          <div class="col-md-3">
            <button class="btn btn-light w-100 derivative-btn">Notes</button>
          </div>
          <div class="col-md-3">
            <button class="btn btn-light w-100 derivative-btn">
              Flash Cards
            </button>
          </div>
          <div class="col-md-3">
            <button class="btn btn-light w-100 derivative-btn">Quizzes</button>
          </div>
          <div class="col-md-3">
            <button class="btn btn-light w-100 derivative-btn">Reports</button>
          </div>
        </div>
      </section>

      <!-- ================================================= -->
      <!-- MOBILE & TABLET VIEW (≤ md)                       -->
      <!-- Tab-based navigation replacing columns            -->
      <!-- ================================================= -->
      <section class="d-block d-md-none">
        <!-- ================= TAB HEADERS ================= -->
        <ul class="nav nav-tabs mb-3" role="tablist">
          <li class="nav-item">
            <button
              class="nav-link active"
              data-bs-toggle="tab"
              data-bs-target="#tab-topics"
            >
              Topics
            </button>
          </li>
          <li class="nav-item">
            <button
              class="nav-link"
              data-bs-toggle="tab"
              data-bs-target="#tab-description"
            >
              Description
            </button>
          </li>
          <li class="nav-item">
            <button
              class="nav-link"
              data-bs-toggle="tab"
              data-bs-target="#tab-chat"
            >
              Ask Us
            </button>
          </li>
          <li class="nav-item">
            <button
              class="nav-link"
              data-bs-toggle="tab"
              data-bs-target="#tab-resources"
            >
              Resources
            </button>
          </li>
        </ul>

        <!-- ================= TAB CONTENT ================= -->
        <div class="tab-content">
          <!-- TOPICS TAB -->
          <div class="tab-pane fade show active" id="tab-topics">
            <div class="vs-panel">
              <div class="vs-panel-header">Topic List</div>
              <div class="vs-panel-body">
                <p class="small text-muted mb-2">
                  Select a topic from the list to continue.
                </p>
                <div class="form-check mb-2">
                  <input class="form-check-input" type="checkbox" />
                  <label class="form-check-label"> Sample Topic Name </label>
                </div>
              </div>
            </div>
          </div>

          <!-- DESCRIPTION TAB -->
          <div class="tab-pane fade" id="tab-description">
            <div class="vs-panel">
              <div class="vs-panel-header">Topic Description</div>
              <div class="vs-panel-body">
                <p class="small text-muted">Description will appear here</p>
              </div>
            </div>
          </div>

          <!-- CHAT TAB -->
          <div class="tab-pane fade" id="tab-chat">
            <div class="vs-panel">
              <div class="vs-panel-header">
                <span>Ask Us</span>
                <div class="d-flex flex-column align-items-end">
                  <div class="d-flex gap-2">
                    <button class="btn btn-outline-secondary btn-sm">
                      Student 1
                    </button>
                    <button class="btn btn-outline-secondary btn-sm">
                      Student 2
                    </button>
                  </div>
                  <div class="small text-muted mt-1 vs-helper-tip">
                    Click Student 1 or Student 2 for personalized explanations,
                    then highlight text for 'Explain This'
                  </div>
                </div>
              </div>
              <div class="vs-panel-body">
                <p class="small text-muted">Chat simulation area</p>
              </div>
              <!-- ================= CHAT INPUT BAR ================= -->
              <div class="chat-input-wrapper mt-auto">
                <div class="chat-input-inner d-flex align-items-center gap-2">
                  <!-- Left icon (add / attach) -->
                  <button
                    type="button"
                    class="btn btn-light chat-icon-btn"
                    aria-label="Add"
                  >
                    +
                  </button>

                  <!-- Text input -->
                  <input
                    type="text"
                    class="form-control chat-text-input"
                    placeholder="Ask Vidyaa sarthi…"
                  />

                  <!-- Right icon (mic / send) -->
                  <button
                    type="button"
                    class="btn btn-dark chat-icon-btn"
                    aria-label="Send"
                  >
                    ↑
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- RESOURCES TAB -->
          <div class="tab-pane fade" id="tab-resources">
            <div class="row g-3">
              <div class="col-6">
                <button class="btn btn-light w-100 derivative-btn">
                  Notes
                </button>
              </div>
              <div class="col-6">
                <button class="btn btn-light w-100 derivative-btn">
                  Flash Cards
                </button>
              </div>
              <div class="col-6">
                <button class="btn btn-light w-100 derivative-btn">
                  Quizzes
                </button>
              </div>
              <div class="col-6">
                <button class="btn btn-light w-100 derivative-btn">
                  Reports
                </button>
              </div>
            </div>
          </div>
        </div>
      </section>
    </section>

    <!-- FINAL CTA -->
    <section class="py-5">
      <div class="container text-center">
        <div class="mx-auto" style="max-width: 760px">
          <h2 class="fw-bold mb-3">Start Your Learning Journey</h2>

          <p>
            Give your child a personalised, supportive learning experience —
            aligned with school curriculum and built for confidence.
          </p>

          <div class="btn-group btn-group-centered mt-4">
            <a href="../../../studentSignup.html" class="btn btn-primary btn-lg">
              <span>Sign up — It's Free</span>
              <span>→</span>
            </a>
            <a href="#vs-howitworks-demo" class="btn btn-warning btn-lg">
              <span>How It Works</span>
              <span>→</span>
            </a>
          </div>

          <p class="small text-muted mt-3 mb-0">
            No pressure. Learn at your own pace.
          </p>
        </div>
      </div>
    </section>

    <!-- ================= FOOTER (Injected via include-components.js) ================= -->
    <div id="vs-footer"></div>

    <!-- ================= BOOTSTRAP BUNDLE (Tabs, Collapse, etc.) ================= -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>

    <!-- ================= SHARED NAVBAR / FOOTER INJECTION ================= -->
    <script src="../../component-js/include-components.js"></script>
    <script src="../../component-js/text-selection-toolbar.js"></script>

    <script type="module">
      import { initDropdownController } from "./howItWorks/controllers/dropdownController.js";
      import { initTopicController } from "./howItWorks/controllers/topicController.js";
      import { initChatSimulationController } from "./howItWorks/controllers/chatSimulationController.js";

      document.addEventListener("DOMContentLoaded", () => {
        initDropdownController();
        initTopicController();
        initChatSimulationController();
      });
    </script>
  </body>
</html>
