<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Vidyaa sarthi - Matrix Reasoning</title>

    <!-- BOOOTSTRAP 5.3.8 CSS (CDN)-->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB"
      crossorigin="anonymous"
    />
    <!--VIS DESIGN SYSTEM FILES -->
    <link rel="stylesheet" href="../../../css/VS-Design-System.css" />
    <link rel="stylesheet" href="../../../css/custom-component.css" />
    <!-- PAGE-SPECIFIC CSS (Optional) -->
    <style>
      .mr-test-shell {
        max-width: 560px;
        margin-inline: auto;
      }
      /* Shared Frame Component reusable visual container for Question frame and Answer frame*/
      .mr-frame {
        width: min(90vw, 100%);
        margin-inline: auto;
        background: var(--bs-body-bg);
        border: 1px solid var(--bs-border-color);
        border-radius: var(--bs-border-radius-lg);
        padding: clamp(6px, 1.5vw, 10px);
      }
      /* Question Frame (Square Matrix Area) - Forces the matrix container to remain square.*/
      .mr-question-frame {
        display: grid;
        place-items: center; /* centers matrix inside frame */
      }
      /* Matrix Grid Container - Creates the 3√ó3 matrix layout.*/
      .mr-matrix {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: clamp(4px, 1.2vw, 6px);

        width: clamp(260px, 80vw, 300px);
        aspect-ratio: 1;
      }
      /*Individual Matrix Cells - Defines each of the 9 matrix cells*/
      .mr-cell {
        aspect-ratio: 1;
        display: grid;
        place-items: center; /* horizontal + vertical centering */
        border: 1px solid var(--bs-border-color);
        border-radius: var(--bs-border-radius);
        background: var(--bs-tertiary-bg);
        user-select: none;
        padding: 4px; /* MAX 4px gap from cell border */
        box-sizing: border-box;
      }
      /* Cell Image */
      .mr-cell__img {
        width: 100%;
        height: 100%;
        object-fit: contain; /* preserves aspect ratio */
        display: block;
      }
      /*Visually distinguishes the cell to be completed*/
      .mr-cell--missing {
        background: var(--bs-body-bg);
        border-style: dashed;
        font-size: clamp(20px, 6vw, 32px);
      }
      /* Answer Options Grid - Renders answer options in a 2√ó3 grid*/
      .mr-options {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: clamp(8px, 2vw, 12px);

        width: clamp(260px, 80vw, 300px);
      }
      /* Answer Option Buttons - Represents a single selectable answer.*/
      .mr-option {
        aspect-ratio: 1;
        min-width: 44px;
        min-height: 44px;
        display: grid;
        place-items: center;
        border: 2px solid var(--bs-border-color);
        border-radius: var(--bs-border-radius);
        background: var(--bs-body-bg);
        font-weight: 600;
      }

      .mr-option:hover {
        border-color: var(--bs-primary);
      }

      .mr-option.is-selected {
        border-color: var(--bs-primary);
        box-shadow: 0 0 0 0.25rem rgba(var(--bs-primary-rgb), 0.25);
      }

      .mr-option:focus-visible {
        outline: none;
        box-shadow: 0 0 0 0.25rem rgba(var(--bs-primary-rgb), 0.25);
      }
      /*Empty Slot (Layout Balance) - Preserves Answer Options Grid symmetry*/
      .mr-option--empty {
        aspect-ratio: 1;
        min-width: 44px;
        min-height: 44px;
        border: 1px dashed var(--bs-border-color);
        border-radius: var(--bs-border-radius);
        background: transparent;
      }

      .mr-illustration-panel {
        background-color: var(--primary-900);
        min-height: 100vh;
      }
      .mr-timer {
        font-size: 0.85rem;
        font-weight: 600;
        color: var(--bs-secondary-color);
        min-width: 48px;
        text-align: right;
      }

      .mr-timer.is-warning {
        color: var(--bs-warning);
      }

      .mr-timer.is-danger {
        color: var(--bs-danger);
      }
      @keyframes pulse {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.08);
        }
        100% {
          transform: scale(1);
        }
      }

      .mr-timer.pulse {
        animation: pulse 0.8s infinite;
      }
    </style>

    <!--END OF HEAD-->
  </head>

  <body class="bg-light">
    <!-- TOP RIGHT LOGO -->

    <div class="container-fluid">
      <div class="row min-vh-100 align-items-start pt-0 mt-0">
        <!-- LEFT COLUMN ‚Äî Test Area -->
        <div class="col-12 col-md-5 d-flex flex-column align-items-center">
          <div class="w-100 mr-test-shell">
            <!-- VS Logo & Instruction Title -->
            <div
              class="col-12 d-flex justify-content-center align-items-center gap-2 py-2"
            >
              <a href="../../../index.html" class="d-flex align-items-center">
                <img
                  src="../../../assets/logo/vsLogoWithouText.svg"
                  alt="Vidyaa sarthi Logo"
                  height="36"
                />
              </a>

              <h6
                class="fw-semibold mb-0"
                style="line-height: 1.2; white-space: nowrap"
              >
                Find the Missing Symbol
              </h6>
            </div>

            <!-- Question Frame -->
            <div class="mb-3">
              <div
                class="mr-frame mr-question-frame"
                aria-label="Question frame"
              >
                <div class="mr-matrix" role="grid" aria-label="3 by 3 matrix">
                  <!-- Question Cell No 1 -->
                  <div class="mr-cell" role="gridcell" aria-label="Cell 1">
                    <img
                      src=""
                      alt=""
                      class="mr-cell__img"
                      aria-hidden="true"
                    />
                  </div>
                  <!-- Question Cell No 2 -->
                  <div class="mr-cell" role="gridcell" aria-label="Cell 2">
                    <img
                      src=""
                      alt=""
                      class="mr-cell__img"
                      aria-hidden="true"
                    />
                  </div>
                  <!-- Question Cell No 3 -->
                  <div class="mr-cell" role="gridcell" aria-label="Cell 3">
                    <img
                      src=""
                      alt=""
                      class="mr-cell__img"
                      aria-hidden="true"
                    />
                  </div>

                  <!-- Question Cell No 4 -->
                  <div class="mr-cell" role="gridcell" aria-label="Cell 4">
                    <img
                      src=""
                      alt=""
                      class="mr-cell__img"
                      aria-hidden="true"
                    />
                  </div>
                  <!-- Question Cell No 5 -->
                  <div class="mr-cell" role="gridcell" aria-label="Cell 5">
                    <img
                      src=""
                      alt=""
                      class="mr-cell__img"
                      aria-hidden="true"
                    />
                  </div>
                  <!-- Question Cell No 6 -->
                  <div class="mr-cell" role="gridcell" aria-label="Cell 6">
                    <img
                      src=""
                      alt=""
                      class="mr-cell__img"
                      aria-hidden="true"
                    />
                  </div>
                  <!-- Question Cell No 7 -->
                  <div class="mr-cell" role="gridcell" aria-label="Cell 7">
                    <img
                      src=""
                      alt=""
                      class="mr-cell__img"
                      aria-hidden="true"
                    />
                  </div>
                  <!-- Question Cell No 8 -->
                  <div class="mr-cell" role="gridcell" aria-label="Cell 8">
                    <img
                      src=""
                      alt=""
                      class="mr-cell__img"
                      aria-hidden="true"
                    />
                  </div>
                  <!-- Question Cell No 9 -->
                  <div
                    class="mr-cell mr-cell--missing"
                    role="gridcell"
                    aria-label="Missing cell"
                  >
                    <img
                      src="../../../assets/graphics/MatrixReasoning/scoredTrialMatrixReasoning/questionMark.svg"
                      alt=""
                      class="mr-cell__img"
                      aria-hidden="true"
                    />
                  </div>
                </div>
              </div>
            </div>

            <!-- Answer Frame -->
            <div class="mb-3">
              <div
                class="d-flex justify-content-between align-items-center mb-2"
              >
                <div class="form-label small mb-0">Answer Option</div>

                <div
                  class="mr-timer"
                  aria-live="polite"
                  aria-label="Time remaining"
                >
                  <span class="mr-timer__value">55</span>s
                </div>
              </div>

              <div class="mr-frame" aria-label="Answer frame">
                <div
                  class="mr-options"
                  role="group"
                  aria-label="Answer options"
                >
                  <!-- Answer Cell No aa -->
                  <button
                    type="button"
                    class="mr-option"
                    data-mr-option="a"
                    aria-pressed="false"
                    aria-label="Answer option a"
                  >
                    <img
                      src=""
                      alt=""
                      class="mr-cell__img"
                      aria-hidden="true"
                    />
                  </button>
                  <!-- Answer Cell No b -->
                  <button
                    type="button"
                    class="mr-option"
                    data-mr-option="b"
                    aria-pressed="false"
                    aria-label="Answer option b"
                  >
                    <img
                      src=""
                      alt=""
                      class="mr-cell__img"
                      aria-hidden="true"
                    />
                  </button>
                  <!-- Answer Cell No c -->
                  <button
                    type="button"
                    class="mr-option"
                    data-mr-option="c"
                    aria-pressed="false"
                    aria-label="Answer option c"
                  >
                    <img
                      src=""
                      alt=""
                      class="mr-cell__img"
                      aria-hidden="true"
                    />
                  </button>
                  <!-- Answer Cell No d -->
                  <button
                    type="button"
                    class="mr-option"
                    data-mr-option="d"
                    aria-pressed="false"
                    aria-label="Answer option d"
                  >
                    <img
                      src=""
                      alt=""
                      class="mr-cell__img"
                      aria-hidden="true"
                    />
                  </button>
                  <div class="mr-option--empty" aria-hidden="true"></div>
                  <div class="mr-option--empty" aria-hidden="true"></div>
                </div>
              </div>
            </div>

            <!-- Confirm Button -->
            <div class="mb-3">
              <button
                type="button"
                class="btn btn-primary w-100"
                data-mr-confirm
                disabled
              >
                Confirm
              </button>
            </div>
          </div>
        </div>

        <!-- RIGHT COLUMN ‚Äî IMAGE (MD & ABOVE ONLY) -->
        <div
          class="col-md-7 d-none d-md-flex align-items-stretch p-0 mr-illustration-panel"
        >
          <img
            src="../../../assets/illustration/signupAndLogin/signupAndLogin.svg"
            class="img-fluid w-100 h-100 object-fit-cover"
            alt="Matrix reasoning illustration"
          />
        </div>
      </div>
    </div>
    <!-- =====================================================
     STEP 7 ‚Äî FEEDBACK MODAL (UI ONLY)
===================================================== -->
    <div
      class="modal fade"
      id="mrFeedbackModal"
      tabindex="-1"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h6 class="modal-title fw-semibold">Vidyaa sarthi Says</h6>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>

          <div class="modal-body small" id="mrFeedbackMessage"></div>

          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-primary"
              data-bs-dismiss="modal"
            >
              OK
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Java Script CDN-->
    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
      integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
      crossorigin="anonymous"
    ></script>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.min.js"
      integrity="sha384-G/EV+4j2dNv+tEPo3++6LCgdCROaejBqfUeNjuKAiuXbjrxilcCdDz6ZAVfHWe1Y"
      crossorigin="anonymous"
    ></script>

    <script src="matrixReasoningCore.js"></script>
    <script>
      /* =====================================================
     Matrix Reasoning ‚Äî TEST (Frontend-only minimal controller)
     Depends on: matrixReasoningCore.js
  ===================================================== */

      document.addEventListener("DOMContentLoaded", () => {
        const TEST_QUESTIONS = [
          {
            id: 1,
            basePath:
              "../../../assets/graphics/MatrixReasoning/scoredTrialMatrixReasoning/upperPrimary/question1/",
          },
          {
            id: 2,
            basePath:
              "../../../assets/graphics/MatrixReasoning/scoredTrialMatrixReasoning/upperPrimary/question2/",
          },
        ];

        const TIME_LIMIT = 60;

        const core = MatrixReasoningCore.create({
          questions: TEST_QUESTIONS,
          timeLimit: TIME_LIMIT,

          onConfirm({ question, selectedOption, timeRemaining, index }) {
            const timeTaken = TIME_LIMIT - timeRemaining;

            console.log("‚úÖ CONFIRM", {
              index,
              questionId: question.id,
              selectedOption,
              timeRemaining,
              timeTaken,
              outcome: "attempted",
            });

            core.next();
          },

          onTimeout({ question, index }) {
            console.log("‚è∞ TIMEOUT", {
              index,
              questionId: question.id,
              selectedOption: null,
              timeRemaining: 0,
              timeTaken: TIME_LIMIT,
              outcome: "timeout",
            });

            core.next();
          },

          onComplete() {
            console.log("üèÅ TEST COMPLETE");
          },
        });

        core.start();
      });
    </script>

    <!--  END of Body-->
  </body>
</html>
